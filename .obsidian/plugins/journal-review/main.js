/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Vt=Object.create;var oe=Object.defineProperty;var Yt=Object.getOwnPropertyDescriptor;var Wt=Object.getOwnPropertyNames;var qt=Object.getPrototypeOf,Bt=Object.prototype.hasOwnProperty;var jt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zt=(t,e)=>{for(var n in e)oe(t,n,{get:e[n],enumerable:!0})},Be=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Wt(e))!Bt.call(t,o)&&o!==n&&oe(t,o,{get:()=>e[o],enumerable:!(i=Yt(e,o))||i.enumerable});return t};var Ne=(t,e,n)=>(n=t!=null?Vt(qt(t)):{},Be(e||!t||!t.__esModule?oe(n,"default",{value:t,enumerable:!0}):n,t)),$t=t=>Be(oe({},"__esModule",{value:!0}),t);var ie=jt(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});var S=require("obsidian"),Se="YYYY-MM-DD",Te="gggg-[W]ww",je="YYYY-MM",ze="YYYY-[Q]Q",$e="YYYY";function B(t){var n,i;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((i=(n=e.settings)==null?void 0:n[t])==null?void 0:i.enabled)}function j(){var t,e,n,i;try{let{internalPlugins:o,plugins:s}=window.app;if(B("daily")){let{format:l,folder:d,template:a}=((e=(t=s.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:l||Se,folder:(d==null?void 0:d.trim())||"",template:(a==null?void 0:a.trim())||""}}let{folder:r,format:c,template:u}=((i=(n=o.getPluginById("daily-notes"))==null?void 0:n.instance)==null?void 0:i.options)||{};return{format:c||Se,folder:(r==null?void 0:r.trim())||"",template:(u==null?void 0:u.trim())||""}}catch(o){console.info("No custom daily note settings found!",o)}}function z(){var t,e,n,i,o,s,r;try{let c=window.app.plugins,u=(t=c.getPlugin("calendar"))==null?void 0:t.options,l=(n=(e=c.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.weekly;if(B("weekly"))return{format:l.format||Te,folder:((i=l.folder)==null?void 0:i.trim())||"",template:((o=l.template)==null?void 0:o.trim())||""};let d=u||{};return{format:d.weeklyNoteFormat||Te,folder:((s=d.weeklyNoteFolder)==null?void 0:s.trim())||"",template:((r=d.weeklyNoteTemplate)==null?void 0:r.trim())||""}}catch(c){console.info("No custom weekly note settings found!",c)}}function $(){var e,n,i,o;let t=window.app.plugins;try{let s=B("monthly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.monthly)||{};return{format:s.format||je,folder:((i=s.folder)==null?void 0:i.trim())||"",template:((o=s.template)==null?void 0:o.trim())||""}}catch(s){console.info("No custom monthly note settings found!",s)}}function Q(){var e,n,i,o;let t=window.app.plugins;try{let s=B("quarterly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.quarterly)||{};return{format:s.format||ze,folder:((i=s.folder)==null?void 0:i.trim())||"",template:((o=s.template)==null?void 0:o.trim())||""}}catch(s){console.info("No custom quarterly note settings found!",s)}}function G(){var e,n,i,o;let t=window.app.plugins;try{let s=B("yearly")&&((n=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:n.yearly)||{};return{format:s.format||$e,folder:((i=s.folder)==null?void 0:i.trim())||"",template:((o=s.template)==null?void 0:o.trim())||""}}catch(s){console.info("No custom yearly note settings found!",s)}}function Qe(...t){let e=[];for(let i=0,o=t.length;i<o;i++)e=e.concat(t[i].split("/"));let n=[];for(let i=0,o=e.length;i<o;i++){let s=e[i];!s||s==="."||n.push(s)}return e[0]===""&&n.unshift(""),n.join("/")}function Qt(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}async function Gt(t){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let n=Qe(...e);window.app.vault.getAbstractFileByPath(n)||await window.app.vault.createFolder(n)}}async function J(t,e){e.endsWith(".md")||(e+=".md");let n=S.normalizePath(Qe(t,e));return await Gt(n),n}async function R(t){let{metadataCache:e,vault:n}=window.app,i=S.normalizePath(t);if(i==="/")return Promise.resolve(["",null]);try{let o=e.getFirstLinkpathDest(i,""),s=await n.cachedRead(o),r=window.app.foldManager.load(o);return[s,r]}catch(o){return console.error(`Failed to read the daily note template '${i}'`,o),new S.Notice("Failed to read the daily note template"),["",null]}}function F(t,e="day"){let n=t.clone().startOf(e).format();return`${e}-${n}`}function Ge(t){return t.replace(/\[[^\]]*\]/g,"")}function Jt(t,e){if(e==="week"){let n=Ge(t);return/w{1,2}/i.test(n)&&(/M{1,4}/.test(n)||/D{1,4}/.test(n))}return!1}function H(t,e){return Je(t.basename,e)}function Kt(t,e){return Je(Qt(t),e)}function Je(t,e){let i={day:j,week:z,month:$,quarter:Q,year:G}[e]().format.split("/").pop(),o=window.moment(t,i,!0);if(!o.isValid())return null;if(Jt(i,e)&&e==="week"){let s=Ge(i);if(/w{1,2}/i.test(s))return window.moment(t,i.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return o}var be=class extends Error{};async function Ke(t){let e=window.app,{vault:n}=e,i=window.moment,{template:o,format:s,folder:r}=j(),[c,u]=await R(o),l=t.format(s),d=await J(r,l);try{let a=await n.create(d,c.replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,i().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(f,_,v,N,g,p)=>{let h=i(),k=t.clone().set({hour:h.get("hour"),minute:h.get("minute"),second:h.get("second")});return v&&k.add(parseInt(N,10),g),p?k.format(p.substring(1).trim()):k.format(s)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(s)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(s)));return e.foldManager.save(a,u),a}catch(a){console.error(`Failed to create file: '${d}'`,a),new S.Notice("Unable to create new file.")}}function Xt(t,e){var n;return(n=e[F(t,"day")])!=null?n:null}function Zt(){let{vault:t}=window.app,{folder:e}=j(),n=t.getAbstractFileByPath(S.normalizePath(e));if(!n)throw new be("Failed to find daily notes folder");let i={};return S.Vault.recurseChildren(n,o=>{if(o instanceof S.TFile){let s=H(o,"day");if(s){let r=F(s,"day");i[r]=o}}}),i}var ke=class extends Error{};function en(){let{moment:t}=window,e=t.localeData()._week.dow,n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)n.push(n.shift()),e--;return n}function tn(t){return en().indexOf(t.toLowerCase())}async function Xe(t){let{vault:e}=window.app,{template:n,format:i,folder:o}=z(),[s,r]=await R(n),c=t.format(i),u=await J(o,c);try{let l=await e.create(u,s.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,a,f,_,v,N)=>{let g=window.moment(),p=t.clone().set({hour:g.get("hour"),minute:g.get("minute"),second:g.get("second")});return f&&p.add(parseInt(_,10),v),N?p.format(N.substring(1).trim()):p.format(i)}).replace(/{{\s*title\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(d,a,f)=>{let _=tn(a);return t.weekday(_).format(f.trim())}));return window.app.foldManager.save(l,r),l}catch(l){console.error(`Failed to create file: '${u}'`,l),new S.Notice("Unable to create new file.")}}function nn(t,e){var n;return(n=e[F(t,"week")])!=null?n:null}function on(){let t={};if(!et())return t;let{vault:e}=window.app,{folder:n}=z(),i=e.getAbstractFileByPath(S.normalizePath(n));if(!i)throw new ke("Failed to find weekly notes folder");return S.Vault.recurseChildren(i,o=>{if(o instanceof S.TFile){let s=H(o,"week");if(s){let r=F(s,"week");t[r]=o}}}),t}var De=class extends Error{};async function Ze(t){let{vault:e}=window.app,{template:n,format:i,folder:o}=$(),[s,r]=await R(n),c=t.format(i),u=await J(o,c);try{let l=await e.create(u,s.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,a,f,_,v,N)=>{let g=window.moment(),p=t.clone().set({hour:g.get("hour"),minute:g.get("minute"),second:g.get("second")});return f&&p.add(parseInt(_,10),v),N?p.format(N.substring(1).trim()):p.format(i)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(l,r),l}catch(l){console.error(`Failed to create file: '${u}'`,l),new S.Notice("Unable to create new file.")}}function sn(t,e){var n;return(n=e[F(t,"month")])!=null?n:null}function rn(){let t={};if(!tt())return t;let{vault:e}=window.app,{folder:n}=$(),i=e.getAbstractFileByPath(S.normalizePath(n));if(!i)throw new De("Failed to find monthly notes folder");return S.Vault.recurseChildren(i,o=>{if(o instanceof S.TFile){let s=H(o,"month");if(s){let r=F(s,"month");t[r]=o}}}),t}var Fe=class extends Error{};async function an(t){let{vault:e}=window.app,{template:n,format:i,folder:o}=Q(),[s,r]=await R(n),c=t.format(i),u=await J(o,c);try{let l=await e.create(u,s.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,a,f,_,v,N)=>{let g=window.moment(),p=t.clone().set({hour:g.get("hour"),minute:g.get("minute"),second:g.get("second")});return f&&p.add(parseInt(_,10),v),N?p.format(N.substring(1).trim()):p.format(i)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(l,r),l}catch(l){console.error(`Failed to create file: '${u}'`,l),new S.Notice("Unable to create new file.")}}function ln(t,e){var n;return(n=e[F(t,"quarter")])!=null?n:null}function cn(){let t={};if(!nt())return t;let{vault:e}=window.app,{folder:n}=Q(),i=e.getAbstractFileByPath(S.normalizePath(n));if(!i)throw new Fe("Failed to find quarterly notes folder");return S.Vault.recurseChildren(i,o=>{if(o instanceof S.TFile){let s=H(o,"quarter");if(s){let r=F(s,"quarter");t[r]=o}}}),t}var Pe=class extends Error{};async function un(t){let{vault:e}=window.app,{template:n,format:i,folder:o}=G(),[s,r]=await R(n),c=t.format(i),u=await J(o,c);try{let l=await e.create(u,s.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,a,f,_,v,N)=>{let g=window.moment(),p=t.clone().set({hour:g.get("hour"),minute:g.get("minute"),second:g.get("second")});return f&&p.add(parseInt(_,10),v),N?p.format(N.substring(1).trim()):p.format(i)}).replace(/{{\s*date\s*}}/gi,c).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,c));return window.app.foldManager.save(l,r),l}catch(l){console.error(`Failed to create file: '${u}'`,l),new S.Notice("Unable to create new file.")}}function dn(t,e){var n;return(n=e[F(t,"year")])!=null?n:null}function _n(){let t={};if(!ot())return t;let{vault:e}=window.app,{folder:n}=G(),i=e.getAbstractFileByPath(S.normalizePath(n));if(!i)throw new Pe("Failed to find yearly notes folder");return S.Vault.recurseChildren(i,o=>{if(o instanceof S.TFile){let s=H(o,"year");if(s){let r=F(s,"year");t[r]=o}}}),t}function pn(){var i,o;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let n=t.plugins.getPlugin("periodic-notes");return n&&((o=(i=n.settings)==null?void 0:i.daily)==null?void 0:o.enabled)}function et(){var n,i;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((i=(n=e.settings)==null?void 0:n.weekly)==null?void 0:i.enabled)}function tt(){var n,i;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((i=(n=e.settings)==null?void 0:n.monthly)==null?void 0:i.enabled)}function nt(){var n,i;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((i=(n=e.settings)==null?void 0:n.quarterly)==null?void 0:i.enabled)}function ot(){var n,i;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((i=(n=e.settings)==null?void 0:n.yearly)==null?void 0:i.enabled)}function fn(t){let e={day:j,week:z,month:$,quarter:Q,year:G}[t];return e()}function mn(t,e){return{day:Ke,month:Ze,week:Xe}[t](e)}m.DEFAULT_DAILY_NOTE_FORMAT=Se;m.DEFAULT_MONTHLY_NOTE_FORMAT=je;m.DEFAULT_QUARTERLY_NOTE_FORMAT=ze;m.DEFAULT_WEEKLY_NOTE_FORMAT=Te;m.DEFAULT_YEARLY_NOTE_FORMAT=$e;m.appHasDailyNotesPluginLoaded=pn;m.appHasMonthlyNotesPluginLoaded=tt;m.appHasQuarterlyNotesPluginLoaded=nt;m.appHasWeeklyNotesPluginLoaded=et;m.appHasYearlyNotesPluginLoaded=ot;m.createDailyNote=Ke;m.createMonthlyNote=Ze;m.createPeriodicNote=mn;m.createQuarterlyNote=an;m.createWeeklyNote=Xe;m.createYearlyNote=un;m.getAllDailyNotes=Zt;m.getAllMonthlyNotes=rn;m.getAllQuarterlyNotes=cn;m.getAllWeeklyNotes=on;m.getAllYearlyNotes=_n;m.getDailyNote=Xt;m.getDailyNoteSettings=j;m.getDateFromFile=H;m.getDateFromPath=Kt;m.getDateUID=F;m.getMonthlyNote=sn;m.getMonthlyNoteSettings=$;m.getPeriodicNoteSettings=fn;m.getQuarterlyNote=ln;m.getQuarterlyNoteSettings=Q;m.getTemplateInfo=R;m.getWeeklyNote=nn;m.getWeeklyNoteSettings=z;m.getYearlyNote=dn;m.getYearlyNoteSettings=G});var Bn={};zt(Bn,{default:()=>we,icon:()=>he});module.exports=$t(Bn);var Y=require("obsidian"),It=Ne(ie());var ge=require("obsidian"),C=Ne(ie());var Z,w,at,gn,A,it,lt,ct,ut,Ae,xe,Ce,dt,X={},_t=[],hn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,le=Array.isArray;function x(t,e){for(var n in e)t[n]=e[n];return t}function Me(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function yn(t,e,n){var i,o,s,r={};for(s in e)s=="key"?i=e[s]:s=="ref"?o=e[s]:r[s]=e[s];if(arguments.length>2&&(r.children=arguments.length>3?Z.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)r[s]===void 0&&(r[s]=t.defaultProps[s]);return K(t,r,i,o,null)}function K(t,e,n,i,o){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o==null?++at:o,__i:-1,__u:0};return o==null&&w.vnode!=null&&w.vnode(s),s}function E(t){return t.children}function re(t,e){this.props=t,this.context=e}function U(t,e){if(e==null)return t.__?U(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?U(t):null}function pt(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return pt(t)}}function Ee(t){(!t.__d&&(t.__d=!0)&&A.push(t)&&!ae.__r++||it!=w.debounceRendering)&&((it=w.debounceRendering)||lt)(ae)}function ae(){for(var t,e,n,i,o,s,r,c=1;A.length;)A.length>c&&A.sort(ct),t=A.shift(),c=A.length,t.__d&&(n=void 0,i=void 0,o=(i=(e=t).__v).__e,s=[],r=[],e.__P&&((n=x({},i)).__v=i.__v+1,w.vnode&&w.vnode(n),Le(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[o]:null,s,o==null?U(i):o,!!(32&i.__u),r),n.__v=i.__v,n.__.__k[n.__i]=n,gt(s,n,r),i.__e=i.__=null,n.__e!=o&&pt(n)));ae.__r=0}function ft(t,e,n,i,o,s,r,c,u,l,d){var a,f,_,v,N,g,p,h=i&&i.__k||_t,k=e.length;for(u=wn(n,e,h,u,k),a=0;a<k;a++)(_=n.__k[a])!=null&&(f=_.__i==-1?X:h[_.__i]||X,_.__i=a,g=Le(t,_,f,o,s,r,c,u,l,d),v=_.__e,_.ref&&f.ref!=_.ref&&(f.ref&&Re(f.ref,null,_),d.push(_.ref,_.__c||v,_)),N==null&&v!=null&&(N=v),(p=!!(4&_.__u))||f.__k===_.__k?u=mt(_,u,t,p):typeof _.type=="function"&&g!==void 0?u=g:v&&(u=v.nextSibling),_.__u&=-7);return n.__e=N,u}function wn(t,e,n,i,o){var s,r,c,u,l,d=n.length,a=d,f=0;for(t.__k=new Array(o),s=0;s<o;s++)(r=e[s])!=null&&typeof r!="boolean"&&typeof r!="function"?(typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?r=t.__k[s]=K(null,r,null,null,null):le(r)?r=t.__k[s]=K(E,{children:r},null,null,null):r.constructor==null&&r.__b>0?r=t.__k[s]=K(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):t.__k[s]=r,u=s+f,r.__=t,r.__b=t.__b+1,(l=r.__i=vn(r,n,u,a))!=-1&&(a--,(c=n[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(o>d?f--:o<d&&f++),typeof r.type!="function"&&(r.__u|=4)):l!=u&&(l==u-1?f--:l==u+1?f++:(l>u?f--:f++,r.__u|=4))):t.__k[s]=null;if(a)for(s=0;s<d;s++)(c=n[s])!=null&&(2&c.__u)==0&&(c.__e==i&&(i=U(c)),yt(c,c));return i}function mt(t,e,n,i){var o,s;if(typeof t.type=="function"){for(o=t.__k,s=0;o&&s<o.length;s++)o[s]&&(o[s].__=t,e=mt(o[s],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=U(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function vn(t,e,n,i){var o,s,r,c=t.key,u=t.type,l=e[n],d=l!=null&&(2&l.__u)==0;if(l===null&&c==null||d&&c==l.key&&u==l.type)return n;if(i>(d?1:0)){for(o=n-1,s=n+1;o>=0||s<e.length;)if((l=e[r=o>=0?o--:s++])!=null&&(2&l.__u)==0&&c==l.key&&u==l.type)return r}return-1}function st(t,e,n){e[0]=="-"?t.setProperty(e,n==null?"":n):t[e]=n==null?"":typeof n!="number"||hn.test(e)?n:n+"px"}function se(t,e,n,i,o){var s,r;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||st(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||st(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(ut,"$1")),r=e.toLowerCase(),e=r in t||e=="onFocusOut"||e=="onFocusIn"?r.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=Ae,t.addEventListener(e,s?Ce:xe,s)):t.removeEventListener(e,s?Ce:xe,s);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n==null?"":n;break e}catch(c){}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function rt(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Ae++;else if(e.t<n.u)return;return n(w.event?w.event(e):e)}}}function Le(t,e,n,i,o,s,r,c,u,l){var d,a,f,_,v,N,g,p,h,k,O,te,W,qe,ne,q,ve,P=e.type;if(e.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),s=[c=e.__e=n.__e]),(d=w.__b)&&d(e);e:if(typeof P=="function")try{if(p=e.props,h="prototype"in P&&P.prototype.render,k=(d=P.contextType)&&i[d.__c],O=d?k?k.props.value:d.__:i,n.__c?g=(a=e.__c=n.__c).__=a.__E:(h?e.__c=a=new P(p,O):(e.__c=a=new re(p,O),a.constructor=P,a.render=Sn),k&&k.sub(a),a.state||(a.state={}),a.__n=i,f=a.__d=!0,a.__h=[],a._sb=[]),h&&a.__s==null&&(a.__s=a.state),h&&P.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=x({},a.__s)),x(a.__s,P.getDerivedStateFromProps(p,a.__s))),_=a.props,v=a.state,a.__v=e,f)h&&P.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),h&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(h&&P.getDerivedStateFromProps==null&&p!==_&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(p,O),e.__v==n.__v||!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(p,a.__s,O)===!1){for(e.__v!=n.__v&&(a.props=p,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(L){L&&(L.__=e)}),te=0;te<a._sb.length;te++)a.__h.push(a._sb[te]);a._sb=[],a.__h.length&&r.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(p,a.__s,O),h&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(_,v,N)})}if(a.context=O,a.props=p,a.__P=t,a.__e=!1,W=w.__r,qe=0,h){for(a.state=a.__s,a.__d=!1,W&&W(e),d=a.render(a.props,a.state,a.context),ne=0;ne<a._sb.length;ne++)a.__h.push(a._sb[ne]);a._sb=[]}else do a.__d=!1,W&&W(e),d=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++qe<25);a.state=a.__s,a.getChildContext!=null&&(i=x(x({},i),a.getChildContext())),h&&!f&&a.getSnapshotBeforeUpdate!=null&&(N=a.getSnapshotBeforeUpdate(_,v)),q=d,d!=null&&d.type===E&&d.key==null&&(q=ht(d.props.children)),c=ft(t,le(q)?q:[q],e,n,i,o,s,r,c,u,l),a.base=e.__e,e.__u&=-161,a.__h.length&&r.push(a),g&&(a.__E=a.__=null)}catch(L){if(e.__v=null,u||s!=null)if(L.then){for(e.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;s[s.indexOf(c)]=null,e.__e=c}else{for(ve=s.length;ve--;)Me(s[ve]);Oe(e)}else e.__e=n.__e,e.__k=n.__k,L.then||Oe(e);w.__e(L,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=Nn(n.__e,e,n,i,o,s,r,u,l);return(d=w.diffed)&&d(e),128&e.__u?void 0:c}function Oe(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Oe)}function gt(t,e,n){for(var i=0;i<n.length;i++)Re(n[i],n[++i],n[++i]);w.__c&&w.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(s){s.call(o)})}catch(s){w.__e(s,o.__v)}})}function ht(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:le(t)?t.map(ht):x({},t)}function Nn(t,e,n,i,o,s,r,c,u){var l,d,a,f,_,v,N,g=n.props||X,p=e.props,h=e.type;if(h=="svg"?o="http://www.w3.org/2000/svg":h=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((_=s[l])&&"setAttribute"in _==!!h&&(h?_.localName==h:_.nodeType==3)){t=_,s[l]=null;break}}if(t==null){if(h==null)return document.createTextNode(p);t=document.createElementNS(o,h,p.is&&p),c&&(w.__m&&w.__m(e,s),c=!1),s=null}if(h==null)g===p||c&&t.data==p||(t.data=p);else{if(s=s&&Z.call(t.childNodes),!c&&s!=null)for(g={},l=0;l<t.attributes.length;l++)g[(_=t.attributes[l]).name]=_.value;for(l in g)if(_=g[l],l!="children"){if(l=="dangerouslySetInnerHTML")a=_;else if(!(l in p)){if(l=="value"&&"defaultValue"in p||l=="checked"&&"defaultChecked"in p)continue;se(t,l,null,_,o)}}for(l in p)_=p[l],l=="children"?f=_:l=="dangerouslySetInnerHTML"?d=_:l=="value"?v=_:l=="checked"?N=_:c&&typeof _!="function"||g[l]===_||se(t,l,_,g[l],o);if(d)c||a&&(d.__html==a.__html||d.__html==t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(a&&(t.innerHTML=""),ft(e.type=="template"?t.content:t,le(f)?f:[f],e,n,i,h=="foreignObject"?"http://www.w3.org/1999/xhtml":o,s,r,s?s[0]:n.__k&&U(n,0),c,u),s!=null)for(l=s.length;l--;)Me(s[l]);c||(l="value",h=="progress"&&v==null?t.removeAttribute("value"):v!=null&&(v!==t[l]||h=="progress"&&!v||h=="option"&&v!=g[l])&&se(t,l,v,g[l],o),l="checked",N!=null&&N!=t[l]&&se(t,l,N,g[l],o))}return t}function Re(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(o){w.__e(o,n)}}function yt(t,e,n){var i,o;if(w.unmount&&w.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||Re(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){w.__e(s,e)}i.base=i.__P=null}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&yt(i[o],e,n||typeof t.type!="function");n||Me(t.__e),t.__c=t.__=t.__e=void 0}function Sn(t,e,n){return this.constructor(t,n)}function wt(t,e,n){var i,o,s,r;e==document&&(e=document.documentElement),w.__&&w.__(t,e),o=(i=typeof n=="function")?null:n&&n.__k||e.__k,s=[],r=[],Le(e,t=(!i&&n||e).__k=yn(E,null,[t]),o||X,X,e.namespaceURI,!i&&n?[n]:o?null:e.firstChild?Z.call(e.childNodes):null,s,!i&&n?n:o?o.__e:e.firstChild,i,r),gt(s,t,r)}function vt(t,e,n){var i,o,s,r,c=x({},t.props);for(s in t.type&&t.type.defaultProps&&(r=t.type.defaultProps),e)s=="key"?i=e[s]:s=="ref"?o=e[s]:c[s]=e[s]===void 0&&r!=null?r[s]:e[s];return arguments.length>2&&(c.children=arguments.length>3?Z.call(arguments,2):n),K(t.type,c,i||t.key,o||t.ref,null)}function Nt(t){function e(n){var i,o;return this.getChildContext||(i=new Set,(o={})[e.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&i.forEach(function(r){r.__e=!0,Ee(r)})},this.sub=function(s){i.add(s);var r=s.componentWillUnmount;s.componentWillUnmount=function(){i&&i.delete(s),r&&r.call(s)}}),n.children}return e.__c="__cC"+dt++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,i){return n.children(i)}).contextType=e,e}Z=_t.slice,w={__e:function(t,e,n,i){for(var o,s,r;e=e.__;)if((o=e.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(t)),r=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,i||{}),r=o.__d),r)return o.__E=o}catch(c){t=c}throw t}},at=0,gn=function(t){return t!=null&&t.constructor==null},re.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=x({},this.state),typeof t=="function"&&(t=t(x({},n),this.props)),t&&x(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ee(this))},re.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ee(this))},re.prototype.render=E,A=[],lt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ct=function(t,e){return t.__v.__b-e.__v.__b},ae.__r=0,ut=/(PointerCapture)$|Capture$/i,Ae=0,xe=rt(!1),Ce=rt(!0),dt=0;var ue,b,He,St,Ue=0,Ct=[],T=w,Tt=T.__b,bt=T.__r,kt=T.diffed,Dt=T.__c,Ft=T.unmount,Pt=T.__;function Et(t,e){T.__h&&T.__h(b,t,Ue||e),Ue=0;var n=b.__H||(b.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Ot(t){return Ue=5,bn(function(){return{current:t}},[])}function bn(t,e){var n=Et(ue++,7);return Fn(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function At(t){var e=b.context[t.__c],n=Et(ue++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(b)),e.props.value):t.__}function kn(){for(var t;t=Ct.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ce),t.__H.__h.forEach(Ie),t.__H.__h=[]}catch(e){t.__H.__h=[],T.__e(e,t.__v)}}T.__b=function(t){b=null,Tt&&Tt(t)},T.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Pt&&Pt(t,e)},T.__r=function(t){bt&&bt(t),ue=0;var e=(b=t.__c).__H;e&&(He===b?(e.__h=[],b.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(ce),e.__h.forEach(Ie),e.__h=[],ue=0)),He=b},T.diffed=function(t){kt&&kt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ct.push(e)!==1&&St===T.requestAnimationFrame||((St=T.requestAnimationFrame)||Dn)(kn)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),He=b=null},T.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ce),n.__h=n.__h.filter(function(i){return!i.__||Ie(i)})}catch(i){e.some(function(o){o.__h&&(o.__h=[])}),e=[],T.__e(i,n.__v)}}),Dt&&Dt(t,e)},T.unmount=function(t){Ft&&Ft(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{ce(i)}catch(o){e=o}}),n.__H=void 0,e&&T.__e(e,n.__v))};var xt=typeof requestAnimationFrame=="function";function Dn(t){var e,n=function(){clearTimeout(i),xt&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,35);xt&&(e=requestAnimationFrame(n))}function ce(t){var e=b,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),b=e}function Ie(t){var e=b;t.__c=t.__(),b=e}function Fn(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}var Pn=Nt({}),de=Pn;var xn=()=>At(de),I=xn;var _e=require("obsidian");var Cn=0;function y(t,e,n,i,o,s){e||(e={});var r,c,u=e;if("ref"in u)for(c in u={},e)c=="ref"?r=e[c]:u[c]=e[c];var l={type:t,props:u,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Cn,__i:-1,__u:0,__source:o,__self:s};if(typeof t=="function"&&(r=t.defaultProps))for(c in r)u[c]===void 0&&(u[c]=r[c]);return w.vnode&&w.vnode(l),l}var En=({note:t})=>{let{app:e,view:n,settings:i}=I(),o=Ot(null);(async()=>{let r=(await e.vault.cachedRead(t)).replace(/---.*?---/s,"").replace(new RegExp(i.noteMarkdownRegex,"sg"),"").substring(0,i.previewLength);o.current&&(o.current.innerHTML="",await _e.MarkdownRenderer.render(e,r,o.current,t.path,n))})();let s=r=>{let c=r.button===1,u=_e.Keymap.isModEvent(r)||c||i.openInNewPane;e.workspace.getLeaf(u).openFile(t)};return i.useCallout?y("div",{className:"callout",onMouseUp:s,children:[i.showNoteTitle&&y("div",{className:"callout-title",children:y("div",{className:"callout-title-inner",children:t.basename})}),y("div",{className:"callout-content",ref:o})]}):y("div",{onMouseUp:s,children:[i.showNoteTitle&&y("h4",{children:t.basename}),y("small",{className:"markdown-rendered",children:i.useQuote?y("blockquote",{ref:o}):y("div",{ref:o})})]})},Mt=En;var On=({title:t,notes:e,wrapper:n})=>{let{settings:{dayMargin:i}}=I();if(!e.length)return null;let o=y(E,{children:[y("h3",{children:[t,i?y("small",{children:[" (+/- ",i," day(s))"]}):"",":"]}),y("ul",{className:"list notes",children:e.map(s=>y("li",{children:y(Mt,{note:s})},s.name))})]});return n?vt(n,{},o):o},Lt=On;var An=({timeSpans:t,startDate:e})=>{let{settings:n}=I();return y("div",{id:"journal-review",children:[n.renderOnFileSwitch&&e?y("h2",{children:["On ",e.format("ll"),"..."]}):y("h2",{children:"On today..."}),y("ul",{className:"list",children:t.map(({title:i,notes:o})=>y(Lt,{title:i,notes:o,wrapper:y("li",{})},i))})]})},Rt=An;var ee=require("obsidian"),pe=Ne(ie()),fe=1e3,M="on-this-day-view",Ve=(o=>(o.day="day",o.week="week",o.month="month",o.year="year",o))(Ve||{}),Ye=[{number:1,unit:"month",recurring:!1},{number:6,unit:"month",recurring:!1},{number:1,unit:"year",recurring:!0}],Ht={timeSpans:Ye,dayMargin:0,sortOrder:"desc",previewLength:100,useHumanize:!0,useCallout:!0,useQuote:!0,openInNewPane:!1,showNoteTitle:!0,useNotifications:!0,renderOnFileSwitch:!1,date:"",noteMarkdownRegex:"",showRandomNote:!1,randomNotePosition:"bottom"},We=({number:t,unit:e,recurring:n})=>`${n?"every":""} ${t} ${e}${t>1?"s":""}`,Mn=(t,e)=>{let n=(0,pe.getDateFromFile)(e,"day");return n!=null&&n.isBefore(t)?n:t},Ln=(t,e,n,i)=>t?e.from(n):`${We({number:n.diff(e,i),unit:i})} ago`,Rn=(t,e,n)=>Array.from({length:t*2+1},(i,o)=>(0,pe.getDailyNote)((0,ee.moment)(e).add(o-t,"days"),n)).filter(Boolean),Hn=(t,e)=>t.moment.valueOf()-e.moment.valueOf(),Un=(t,e)=>e.moment.valueOf()-t.moment.valueOf(),In=(t,e)=>t.stat.ctime-e.stat.ctime,Vn=(t,e)=>e.stat.ctime-t.stat.ctime,Yn=(t,e)=>e.some(n=>n.path===t.path),Wn=t=>{if(!Object.keys(t).length)return null;let e=Object.values(t),n=Math.floor(Math.random()*e.length);return e[n]},me=(t,e,n=(0,ee.moment)())=>{let i=Object.values(t).reduce(Mn,n),o=Object.values(e.timeSpans.reduce((r,{number:c,unit:u,recurring:l})=>{let d=(0,ee.moment)(n);do{d.subtract(c,u);let a=Ln(e.useHumanize,d,n,u),f=Rn(e.dayMargin,d,t);f.length&&(r[a]={title:a,moment:d.clone(),notes:(r[a]?r[a].notes.concat(f.filter(_=>!Yn(_,r[a].notes))):f).sort(e.sortOrder==="asc"?In:Vn)})}while(d.isAfter(i)&&l);return r},{})).sort(e.sortOrder==="asc"?Hn:Un),s=Wn(t);if(e.showRandomNote&&s){let r={title:"a random day",notes:[s],moment:(0,ee.moment)(s.stat.mtime)};e.randomNotePosition==="top"?o.unshift(r):o.push(r)}return o};var V=class extends ge.ItemView{constructor(n,i){super(n);this.icon=he;this.debouncedRenderView=(0,ge.debounce)(this.renderView.bind(this),500);this.settings=i,this.app.workspace.onLayoutReady(()=>{this.registerEvent(this.app.vault.on("create",o=>{(0,C.getDateFromFile)(o,"day")&&this.debouncedRenderView()})),this.registerEvent(this.app.vault.on("delete",o=>{(0,C.getDateFromFile)(o,"day")&&this.debouncedRenderView()})),this.registerEvent(this.app.vault.on("rename",o=>{(0,C.getDateFromFile)(o,"day")&&this.debouncedRenderView()})),this.registerEvent(this.app.workspace.on("file-open",o=>{let s=o&&(0,C.getDateFromFile)(o,"day");this.settings.renderOnFileSwitch&&s&&this.debouncedRenderView(s)})),this.registerInterval(window.setInterval(()=>{new Date().getHours()===0&&this.renderView()},3600*1e3))})}getViewType(){return M}getDisplayText(){return"On this day"}renderView(n){let i=this.containerEl.children[1];if(!(0,C.appHasDailyNotesPluginLoaded)()){i.createEl("b",{text:"Daily notes plugin not loaded"});return}let s=me((0,C.getAllDailyNotes)(),this.settings,n);wt(y(de.Provider,{value:{app:this.app,view:this,settings:this.settings},children:y(Rt,{timeSpans:s,startDate:n})}),i)}async onOpen(){this.debouncedRenderView()}async onClose(){}};var D=require("obsidian");var qn=t=>{switch(t){case"day":return 31;case"week":return 52;case"month":return 24;case"year":return 100}},ye=class extends D.PluginSettingTab{constructor(e,n){super(e,n),this.plugin=n}display(){let{containerEl:e}=this;e.empty(),e.addClass("journal-review-settings");let n=new D.SettingGroup(e).setHeading("Time Spans").addClass("time-spans-group");n.addSetting(o=>{o.setDesc("Define time spans to review, e.g. '1 month' or 'every 6 months'. Overlapping time spans may cause duplicate entries."),o.settingEl.addClass("time-spans-description")}),this.plugin.settings.timeSpans.forEach(({number:o,unit:s,recurring:r},c)=>{n.addSetting(u=>{u.setName(`Time span #${c+1}`).setDesc(We({number:o,unit:s,recurring:r})).addSlider(l=>l.setLimits(1,qn(s),1).setDynamicTooltip().setValue(o).onChange((0,D.debounce)(d=>{this.plugin.settings.timeSpans[c].number=d,this.plugin.saveSettings(),this.display()},fe,!0))).addDropdown(l=>l.addOptions(Ve).setValue(s).onChange(d=>{this.plugin.settings.timeSpans[c].unit=d,this.plugin.saveSettings(),this.display()})).addToggle(l=>l.setValue(!!r).onChange(d=>{this.plugin.settings.timeSpans[c].recurring=d,this.plugin.saveSettings(),this.display()}).setTooltip("Recurring?")).addButton(l=>l.setButtonText("X").setIcon("delete").setTooltip("Delete").onClick(()=>{this.plugin.settings.timeSpans.splice(c,1),this.plugin.saveSettings(),this.display()}))})}),n.addSetting(o=>{o.addButton(s=>s.setCta().setButtonText("Add Time Span").onClick(()=>{this.plugin.settings.timeSpans.push({...Ye[0]}),this.plugin.saveSettings(),this.display()}))}),new D.SettingGroup(e).setHeading("General").addSetting(o=>{o.setName("Lookup Margin").setDesc("The number of days to include before and after the date being checked").addSlider(s=>s.setDynamicTooltip().setValue(this.plugin.settings.dayMargin).onChange((0,D.debounce)(r=>{this.plugin.settings.dayMargin=r,this.plugin.saveSettings()},fe,!0)))}).addSetting(o=>{o.setName("Sort Order").setDesc("Order time spans and notes either by oldest or newest first.").addDropdown(s=>{s.addOptions({asc:"Oldest first",desc:"Newest first"}).setValue(this.plugin.settings.sortOrder).onChange(r=>{this.plugin.settings.sortOrder=r,this.plugin.saveSettings()})})}).addSetting(o=>{o.setName("Date based on selected note").setDesc("Use the date of the currently open daily note.").addToggle(s=>{s.setValue(this.plugin.settings.renderOnFileSwitch).onChange(r=>{this.plugin.settings.renderOnFileSwitch=r,this.plugin.saveSettings()})})}),new D.SettingGroup(e).setHeading("Random Daily Note").addSetting(o=>{o.setName("Show Random Daily Note").setDesc("Show a random daily note besides the other notes.").addToggle(s=>s.setValue(this.plugin.settings.showRandomNote).onChange(r=>{this.plugin.settings.showRandomNote=r,this.plugin.saveSettings()}))}).addSetting(o=>{o.setName("Random Note Position").setDesc("Whether to show the random daily note on top or bottom.").addDropdown(s=>s.addOptions({top:"Top",bottom:"Bottom"}).setValue(this.plugin.settings.randomNotePosition).onChange(r=>{this.plugin.settings.randomNotePosition=r,this.plugin.saveSettings()}))});let i=new D.SettingGroup(e).setHeading("Previews").addSetting(o=>{o.setName("Preview Length").setDesc("Length of the preview text to show for each note.").addSlider(s=>s.setLimits(0,1e3,10).setDynamicTooltip().setValue(this.plugin.settings.previewLength).onChange((0,D.debounce)(r=>{this.plugin.settings.previewLength=r,this.plugin.saveSettings()},fe,!0)))}).addSetting(o=>{o.setName("Show Note Title with previews").setDesc("Render the note title above the preview text, when showing note previews.").addToggle(s=>s.setValue(this.plugin.settings.showNoteTitle).onChange(r=>{this.plugin.settings.showNoteTitle=r,this.plugin.saveSettings()}))}).addSetting(o=>{let s=new DocumentFragment;s.textContent="Use the 'humanization' feature from moment.js, when rendering the time spans titles. ",s.createEl("a",{text:"More info",attr:{href:"https://momentjs.com/docs/#/durations/humanize/"}}),o.setName("Humanize Time Spans").setDesc(s).addToggle(r=>r.setValue(this.plugin.settings.useHumanize).onChange(c=>{this.plugin.settings.useHumanize=c,this.plugin.saveSettings()}))}).addSetting(o=>{let s=new DocumentFragment;s.textContent="Use callouts to render note previews, using their styles based on current theme. ",s.createEl("a",{text:"More info",attr:{href:"https://help.obsidian.md/Editing+and+formatting/Callouts"}}),o.setName("Use Obsidian callouts for note previews").setDesc(s).addToggle(r=>r.setValue(this.plugin.settings.useCallout).onChange(c=>{this.plugin.settings.useCallout=c,this.plugin.saveSettings(),this.display()}))});this.plugin.settings.useCallout||i.addSetting(o=>{o.setName("Use quote element for note previews").setDesc("Format note previews using the HTML quote element").addToggle(s=>s.setValue(this.plugin.settings.useQuote).onChange(r=>{this.plugin.settings.useQuote=r,this.plugin.saveSettings()}))}),i.addSetting(o=>{o.setName("Open in new pane").setDesc("Open the notes in a new pane/tab by default when clicking them.").addToggle(s=>s.setValue(this.plugin.settings.openInNewPane).onChange(r=>{this.plugin.settings.openInNewPane=r,this.plugin.saveSettings()}))}),new D.SettingGroup(e).setHeading("Other").addSetting(o=>{o.setName("Use notifications").setDesc("Use notifications (inside Obsidian) to let you know, when there are new journal entries to review. This will happen when Obsidian is focused and it's a new day.").addToggle(s=>s.setValue(this.plugin.settings.useNotifications).onChange(r=>{this.plugin.settings.useNotifications=r,this.plugin.saveSettings()}))}).addSetting(o=>{o.setName("Note filtering regex").setDesc("Use any string or regex (without `/` at beginning and end or flags) to filter the note content before rendering.").addText(s=>s.setValue(this.plugin.settings.noteMarkdownRegex).onChange(r=>{this.plugin.settings.noteMarkdownRegex=r,this.plugin.saveSettings()}))})}};var he="calendar-clock",Ut="Open 'On this day' view",we=class extends Y.Plugin{constructor(){super(...arguments);this.checkIsNewDay=()=>{if(!this.settings.date||(0,Y.moment)(new Date).isAfter(this.settings.date,"day")){this.settings.date=new Date().toISOString(),this.saveSettings();let n=me((0,It.getAllDailyNotes)(),this.settings).reduce((i,o)=>i+o.notes.length,0);n&&new Y.Notice(`It's a new day! You have ${n} journal entries to review. Open the "On this day" view to see them.`,0)}};this.setupFocusListener=()=>{this.settings.useNotifications?(setTimeout(this.checkIsNewDay,1e3),addEventListener("focus",this.checkIsNewDay)):removeEventListener("focus",this.checkIsNewDay)}}async onload(){await this.loadSettings(),this.addRibbonIcon(he,Ut,()=>{this.activateView()}),this.addCommand({id:"open-on-this-day",name:Ut,callback:()=>this.activateView()}),this.addSettingTab(new ye(this.app,this)),this.registerView(M,n=>new V(n,this.settings)),this.setupFocusListener()}async activateView(){let{workspace:n}=this.app,i,o=n.getLeavesOfType(M);o.length>0?i=o[0]:(i=n.getRightLeaf(!1),await(i==null?void 0:i.setViewState({type:M,active:!0}))),await n.revealLeaf(i),this.renderView()}onunload(){removeEventListener("focus",this.checkIsNewDay)}async loadSettings(){var o;let n=await this.loadData(),i=n;(o=n==null?void 0:n.timeSpans)!=null&&o.length&&Object.prototype.hasOwnProperty.call(n.timeSpans[0],"length")&&(i.timeSpans=n.timeSpans.map(([s,r])=>({number:s,unit:r.endsWith("s")?r.slice(0,-1):r,recurring:!1}))),this.settings=Object.assign({},Ht,i)}renderView(){let n=this.app.workspace.getLeavesOfType(M).first();n&&n.view instanceof V&&n.view.renderView()}async saveSettings(){await this.saveData(this.settings),this.renderView(),this.setupFocusListener()}};

/* nosourcemap */